-- Euro Pricing Tables Creation Script (올바른 컬럼명)
-- 모든 테이블 삭제 후 실행

-- 1. Country Routes 테이블 (가장 중요)
CREATE TABLE euro_pricing_country_routes (
    id SERIAL PRIMARY KEY,
    country1 TEXT,
    country2 TEXT,
    subregion1 TEXT,
    subregion2 TEXT,
    region1 TEXT,
    region2 TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- 2. Wholesale Prices 테이블
CREATE TABLE euro_pricing_wholesale_prices (
    id SERIAL PRIMARY KEY,
    route_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- 3. Regions 테이블 (지역별 요약)
CREATE TABLE euro_pricing_regions (
    id SERIAL PRIMARY KEY,
    region_name TEXT,
    historical_2017 NUMERIC,
    historical_2018 NUMERIC,
    historical_2019 NUMERIC,
    historical_2020 NUMERIC,
    historical_2021 NUMERIC,
    historical_2022 NUMERIC,
    historical_2023 NUMERIC,
    forecast_2024 NUMERIC,
    forecast_2025 NUMERIC,
    forecast_2026 NUMERIC,
    forecast_2027 NUMERIC,
    forecast_2028 NUMERIC,
    forecast_2029 NUMERIC,
    forecast_2030 NUMERIC,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- 4. Countries 테이블 (국가별 요약)
CREATE TABLE euro_pricing_countries (
    id SERIAL PRIMARY KEY,
    country_name TEXT,
    total_bandwidth_2017 NUMERIC,
    total_bandwidth_2018 NUMERIC,
    total_bandwidth_2019 NUMERIC,
    total_bandwidth_2020 NUMERIC,
    total_bandwidth_2021 NUMERIC,
    total_bandwidth_2022 NUMERIC,
    total_bandwidth_2023 NUMERIC,
    total_bandwidth_2024 NUMERIC,
    total_bandwidth_2025 NUMERIC,
    total_bandwidth_2026 NUMERIC,
    total_bandwidth_2027 NUMERIC,
    total_bandwidth_2028 NUMERIC,
    total_bandwidth_2029 NUMERIC,
    total_bandwidth_2030 NUMERIC,
    backbone_providers_2017 NUMERIC,
    backbone_providers_2018 NUMERIC,
    backbone_providers_2019 NUMERIC,
    backbone_providers_2020 NUMERIC,
    backbone_providers_2021 NUMERIC,
    backbone_providers_2022 NUMERIC,
    backbone_providers_2023 NUMERIC,
    backbone_providers_2024 NUMERIC,
    backbone_providers_2025 NUMERIC,
    backbone_providers_2026 NUMERIC,
    backbone_providers_2027 NUMERIC,
    backbone_providers_2028 NUMERIC,
    backbone_providers_2029 NUMERIC,
    backbone_providers_2030 NUMERIC,
    content_providers_2017 NUMERIC,
    content_providers_2018 NUMERIC,
    content_providers_2019 NUMERIC,
    content_providers_2020 NUMERIC,
    content_providers_2021 NUMERIC,
    content_providers_2022 NUMERIC,
    content_providers_2023 NUMERIC,
    content_providers_2024 NUMERIC,
    content_providers_2025 NUMERIC,
    content_providers_2026 NUMERIC,
    content_providers_2027 NUMERIC,
    content_providers_2028 NUMERIC,
    content_providers_2029 NUMERIC,
    content_providers_2030 NUMERIC,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- 5. Route Summary 테이블
CREATE TABLE euro_pricing_route_summary (
    id SERIAL PRIMARY KEY,
    route_name TEXT,
    used_bandwidth_2017 NUMERIC,
    used_bandwidth_2018 NUMERIC,
    used_bandwidth_2019 NUMERIC,
    used_bandwidth_2020 NUMERIC,
    used_bandwidth_2021 NUMERIC,
    used_bandwidth_2022 NUMERIC,
    used_bandwidth_2023 NUMERIC,
    used_bandwidth_2024 NUMERIC,
    used_bandwidth_2025 NUMERIC,
    used_bandwidth_2026 NUMERIC,
    used_bandwidth_2027 NUMERIC,
    used_bandwidth_2028 NUMERIC,
    used_bandwidth_2029 NUMERIC,
    used_bandwidth_2030 NUMERIC,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- 6-14. Regional Deployment/Prices/Revenues 테이블들
CREATE TABLE euro_pricing_trans_atlantic (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_trans_pacific (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_us_latin_america (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_intra_asia (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_europe_middle_east_and_egypt (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_europe_east_asia (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_europe_south_asia (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_east_asia_south_asia (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

CREATE TABLE euro_pricing_europe_sub_saharan_africa (
    id SERIAL PRIMARY KEY,
    metric_name TEXT,
    year_2017 NUMERIC,
    year_2018 NUMERIC,
    year_2019 NUMERIC,
    year_2020 NUMERIC,
    year_2021 NUMERIC,
    year_2022 NUMERIC,
    year_2023 NUMERIC,
    year_2024 NUMERIC,
    year_2025 NUMERIC,
    year_2026 NUMERIC,
    year_2027 NUMERIC,
    year_2028 NUMERIC,
    year_2029 NUMERIC,
    year_2030 NUMERIC,
    change_2018 NUMERIC,
    change_2019 NUMERIC,
    change_2020 NUMERIC,
    change_2021 NUMERIC,
    change_2022 NUMERIC,
    change_2023 NUMERIC,
    change_2024 NUMERIC,
    change_2025 NUMERIC,
    change_2026 NUMERIC,
    change_2027 NUMERIC,
    change_2028 NUMERIC,
    change_2029 NUMERIC,
    change_2030 NUMERIC,
    cagr_2023_30 TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- 인덱스 생성
CREATE INDEX idx_country_routes_countries ON euro_pricing_country_routes(country1, country2);
CREATE INDEX idx_country_routes_regions ON euro_pricing_country_routes(region1, region2);
CREATE INDEX idx_wholesale_prices_route ON euro_pricing_wholesale_prices(route_name);
CREATE INDEX idx_regions_name ON euro_pricing_regions(region_name);
CREATE INDEX idx_countries_name ON euro_pricing_countries(country_name);

-- RLS 비활성화
ALTER TABLE euro_pricing_country_routes DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_wholesale_prices DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_regions DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_countries DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_route_summary DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_trans_atlantic DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_trans_pacific DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_us_latin_america DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_intra_asia DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_europe_middle_east_and_egypt DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_europe_east_asia DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_europe_south_asia DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_east_asia_south_asia DISABLE ROW LEVEL SECURITY;
ALTER TABLE euro_pricing_europe_sub_saharan_africa DISABLE ROW LEVEL SECURITY;

SELECT 'All Euro Pricing tables with proper column names created successfully!' as message;